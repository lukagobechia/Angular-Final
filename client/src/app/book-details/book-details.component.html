<app-nav-bar></app-nav-bar>

<div *ngIf="book" style="margin-top: 50px">
  <div class="details-container">
    <img [src]="book.imageUrl" class="card-img-top" alt="Book Image">

    <h2>{{ book.title }}</h2>
    <p>{{ book.description }}</p>
    <p>Rating: {{ book.rating }}</p>
    <p>Date Added: {{ book.dateAdded | date }}</p>
    <p>Currently: {{ book.available ? 'Available' : 'Not Available' }}</p>

    <h3>Authors</h3>
    <ul>
      <li *ngFor="let author of book.authors">
        {{ author.firstName }} {{ author.lastName }}
      </li>
    </ul>
  </div>
  <div class="centered-buttons">
    <button class="btn btn-primary" routerLinkActive="active" (click)="editAuthor()">Edit Book</button>
    <button class="btn btn-success" style="margin-left: 10px" routerLinkActive="active" (click)="takeReturn()">Take / Return</button>
    <button class="btn btn-danger" style="margin-left: 10px" routerLinkActive="active" (click)="deleteBook()">Delete Book</button>
  </div>
  <div *ngIf="isEditing">
    <div class="form-group">
      <label for="updatedTitle">Updated Title:</label>
      <input type="text" id="updatedTitle" [(ngModel)]="updatedTitle" class="form-control" required>
    </div>
    <div class="form-group">
      <label for="updatedDescription">Updated Description:</label>
      <input type="text" id="updatedDescription" [(ngModel)]="updatedDescription" class="form-control" required>
    </div>

    <div class="mb-3">
      <label for="updatedImage" class="form-label">Updated Image:</label>
      <input type="file" id="updatedImage" name="updatedImage" (change)="onImageSelected($event)" class="form-control" accept=".jpg, .png">
    </div>

    <div class="form-group">
      <label for="updatedRating">Updated Rating:</label>
      <input type="text" id="updatedRating" [(ngModel)]="updatedRating" class="form-control" required>
    </div>


    <button class="btn btn-primary" (click)="saveChanges()">Save Changes</button>
    <button class="btn btn-secondary" (click)="isEditing = false">Cancel</button>
  </div>
</div>
